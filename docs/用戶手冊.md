# Markdown 投影片產生器 - 用戶手冊

## 📋 目錄

1. [系統需求](#系統需求)
2. [環境設置](#環境設置)
3. [啟動應用](#啟動應用)
4. [功能詳細測試](#功能詳細測試)
5. [API 測試](#api-測試)
6. [故障排除](#故障排除)
7. [開發模式](#開發模式)

---

## 🔧 系統需求

### 基本需求

- **Node.js**: 18.0.0 或更高版本
- **npm**: 8.0.0 或更高版本 (或 yarn 1.22.0+)
- **瀏覽器**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **記憶體**: 至少 4GB RAM
- **網路**: 穩定的網際網路連接（用於 OpenAI API）

### OpenAI API 金鑰

- 有效的 OpenAI API 金鑰
- 建議使用 GPT-4 或 GPT-3.5-turbo 模型
- 確保 API 額度充足

---

## ⚙️ 環境設置

### 1. 克隆專案（如果尚未完成）

```bash
git clone <repository-url>
cd markdown-slide-generator
```

### 2. 安裝依賴

```bash
# 使用 npm
npm install

# 或使用 yarn
yarn install
```

### 3. 環境變數設置

創建 `.env.local` 文件：

```bash
cp .env.example .env.local
```

編輯 `.env.local` 文件：

```env
# 可選：OpenAI API 金鑰（也可在應用內設置）
OPENAI_API_KEY=sk-your-openai-api-key-here

# 應用設置
NEXT_PUBLIC_APP_ENV=development
NEXT_PUBLIC_APP_VERSION=1.0.0

# API 設置
NEXT_PUBLIC_API_BASE_URL=http://localhost:3000/api

# 快取設置
NEXT_PUBLIC_ENABLE_CACHE=true
NEXT_PUBLIC_CACHE_TTL=3600

# 除錯模式
NEXT_PUBLIC_DEBUG=true
```

### 4. 驗證安裝

```bash
npm run build
```

如果建置成功，表示環境設置正確。

---

## 🚀 啟動應用

### 開發模式

```bash
npm run dev
```

### 生產模式

```bash
npm run build
npm run start
```

### 應用網址

- **開發模式**: http://localhost:3000
- **生產模式**: http://localhost:3000

### 啟動確認

1. 瀏覽器打開應用網址
2. 應該看到 "Markdown 投影片產生器" 主頁
3. 檢查控制台無錯誤訊息
4. 確認主題切換功能正常

---

## 🧪 功能詳細測試

### 1. 基本介面測試

#### 1.1 頁面載入

- ✅ 主頁正常載入
- ✅ 顯示應用標題："Markdown 投影片產生器"
- ✅ 顯示副標題："使用 AI 快速生成專業投影片"
- ✅ 主要操作按鈕可見：「生成投影片」、「匯出」

#### 1.2 響應式設計

- ✅ 桌面瀏覽器（1920x1080）正常顯示
- ✅ 平板尺寸（768x1024）自動調整佈局
- ✅ 手機尺寸（375x667）切換為標籤頁模式
- ✅ 分割視圖調整器正常工作

#### 1.3 主題系統

測試步驟：

1. 點擊右上角主題切換按鈕
2. 測試三個模式：
   - **明亮模式** ☀️：白色背景，深色文字
   - **深色模式** 🌙：深色背景，淺色文字
   - **系統主題** 🖥️：跟隨系統設置
3. 確認每次切換主題立即生效
4. 重新載入頁面確認設置保持

### 2. Markdown 編輯器測試

#### 2.1 基本編輯功能

測試內容：

````markdown
# 測試標題

## 副標題

這是**粗體**和*斜體*測試。

- 列表項目 1
- 列表項目 2
- 列表項目 3

1. 有序列表項目 1
2. 有序列表項目 2

> 這是引用文字

```javascript
console.log('程式碼測試');
```
````

[連結測試](https://example.com)

---

# 第二張投影片

投影片分隔符測試。

````

#### 2.2 編輯器功能測試
- ✅ **語法高亮**：Markdown 語法正確著色
- ✅ **行號顯示**：左側顯示行號
- ✅ **自動縮排**：按 Enter 鍵自動縮排
- ✅ **Tab 縮排**：Tab 鍵增加縮排，Shift+Tab 減少縮排
- ✅ **工具列按鈕**：

##### 格式化按鈕測試：
1. **粗體 (Ctrl+B)**：選擇文字，點擊 **B** 按鈕
2. **斜體 (Ctrl+I)**：選擇文字，點擊 *I* 按鈕
3. **程式碼 (Ctrl+/)**：選擇文字，點擊 `</>` 按鈕
4. **連結 (Ctrl+K)**：選擇文字，點擊 🔗 按鈕

##### 標題按鈕測試：
1. **H1**：游標在行上，點擊 H1 按鈕
2. **H2**：游標在行上，點擊 H2 按鈕
3. **H3**：游標在行上，點擊 H3 按鈕

##### 列表按鈕測試：
1. **無序列表**：點擊列表按鈕
2. **有序列表**：點擊編號列表按鈕
3. **引用**：點擊引用按鈕

##### 插入按鈕測試：
1. **投影片分隔符**：點擊「投影片」按鈕，插入 `---`
2. **表格**：點擊「表格」按鈕，插入表格模板
3. **程式碼區塊**：點擊「程式碼」按鈕，插入程式碼區塊模板

#### 2.3 快捷鍵測試
- ✅ **Ctrl+B**：粗體
- ✅ **Ctrl+I**：斜體
- ✅ **Ctrl+K**：連結
- ✅ **Ctrl+/**：程式碼
- ✅ **Ctrl+Z**：復原
- ✅ **Ctrl+Y** 或 **Ctrl+Shift+Z**：重做
- ✅ **Ctrl+S**：儲存（顯示儲存狀態）

#### 2.4 統計資訊測試
檢查編輯器右下角統計：
- ✅ **投影片數量**：正確計算投影片數量
- ✅ **字數統計**：即時更新字數
- ✅ **字元數**：包含空格的字元數
- ✅ **行數**：總行數統計
- ✅ **儲存狀態**：顯示已儲存/未儲存狀態

### 3. 投影片預覽測試

#### 3.1 即時預覽
測試步驟：
1. 在編輯器輸入 Markdown 內容
2. 確認右側預覽即時更新
3. 測試各種 Markdown 語法渲染效果

#### 3.2 預覽主題測試
在預覽工具列測試主題：
- ✅ **default**：預設主題
- ✅ **gaia**：現代風格主題
- ✅ **uncover**：簡潔主題
- ✅ **academic**：學術風格主題

#### 3.3 預覽模式測試
- ✅ **單張模式**：一次顯示一張投影片
- ✅ **網格模式**：投影片縮圖網格（如果支援）
- ✅ **簡報模式**：全螢幕簡報模式

#### 3.4 導航控制測試
- ✅ **上一張**：← 按鈕或左方向鍵
- ✅ **下一張**：→ 按鈕或右方向鍵
- ✅ **投影片編號**：點擊可跳轉到指定投影片
- ✅ **進度條**：顯示當前進度

#### 3.5 縮放功能測試
- ✅ **放大**：+ 按鈕
- ✅ **縮小**：- 按鈕
- ✅ **重置**：重置到 100%
- ✅ **全螢幕**：F11 或全螢幕按鈕

### 4. AI 投影片生成測試

#### 4.1 API 金鑰設置
1. 點擊右上角「設定」按鈕（⚙️）
2. 或點擊「生成投影片」按鈕打開表單
3. 輸入有效的 OpenAI API 金鑰：`sk-...`
4. 確認金鑰格式驗證正常

#### 4.2 基本生成測試
測試主題範例：
- `React 入門教學`
- `Python 數據分析`
- `機器學習基礎概念`
- `Docker 容器化部署`

測試步驟：
1. 點擊「生成投影片」按鈕
2. 填寫表單：
   - **主題**：輸入上述任一主題
   - **模型**：選擇 `gpt-4o-mini`（較便宜）
   - **頁數**：選擇 `8-12 頁`
   - **風格**：選擇 `專業風格`
   - **語言**：選擇 `繁體中文`
   - **包含圖片**：勾選
3. 點擊「生成」按鈕
4. 等待生成完成（通常 10-30 秒）
5. 確認生成的 Markdown 內容合理

#### 4.3 進階設置測試
- ✅ **目標受眾**：測試初學者、中級、進階設置
- ✅ **投影片格式**：測試簡報、教學、工作坊等格式
- ✅ **語調**：測試正式、休閒、學術、友善等語調
- ✅ **自訂指示**：添加特殊要求

#### 4.4 錯誤處理測試
- ✅ **無效 API 金鑰**：應顯示錯誤訊息
- ✅ **網路錯誤**：應顯示重試選項
- ✅ **額度不足**：應顯示相應錯誤訊息
- ✅ **超時錯誤**：應有適當的超時處理

### 5. 匯出功能測試

#### 5.1 基本匯出測試
1. 確保編輯器有投影片內容
2. 點擊「匯出」按鈕
3. 測試各種格式：

##### HTML 匯出：
- ✅ 下載 `.html` 檔案
- ✅ 使用瀏覽器打開檔案
- ✅ 確認投影片導航功能正常
- ✅ 檢查響應式設計
- ✅ 測試鍵盤導航（空格鍵、方向鍵）

##### PDF 匯出（模擬）：
- ✅ 下載 `.pdf` 檔案
- ✅ 檔案大小合理
- ✅ 確認模擬內容包含投影片資訊

##### PPTX 匯出（模擬）：
- ✅ 下載 `.pptx` 檔案
- ✅ 檔案大小合理
- ✅ 確認模擬內容包含投影片資訊

##### Markdown 匯出：
- ✅ 下載 `.md` 檔案
- ✅ 檔案包含原始 Markdown 內容
- ✅ 檔案包含元資料標頭

#### 5.2 匯出選項測試
- ✅ **檔案名稱**：自訂檔案名稱
- ✅ **主題選擇**：選擇不同主題匯出
- ✅ **進階選項**：
  - 包含備註
  - 投影片尺寸
  - 字體大小
  - 品質設置

### 6. 錯誤處理和邊界測試

#### 6.1 大型文件測試
創建大型 Markdown 文件（1000+ 行）：
- ✅ 編輯器效能不顯著下降
- ✅ 預覽渲染正常
- ✅ 記憶體使用合理
- ✅ 顯示效能建議（如果啟用）

#### 6.2 無效內容測試
- ✅ **空白內容**：應正常處理
- ✅ **僅有空格**：應顯示空狀態
- ✅ **無效 Markdown**：應正常渲染
- ✅ **超長行**：應正確換行

#### 6.3 網路錯誤測試
1. 關閉網路連接
2. 嘗試生成投影片
3. 確認顯示網路錯誤訊息
4. 恢復網路連接
5. 確認重試功能正常

---

## 🔌 API 測試

### 1. API 端點測試

#### 測試 API 健康狀態
```bash
curl http://localhost:3000/api/test
````

預期回應：

```json
{
  "message": "API 測試成功",
  "timestamp": "2025-01-XX:XX:XX.XXXZ"
}
```

#### 測試投影片生成 API

```bash
curl -X POST http://localhost:3000/api/v1/slides \
  -H "Content-Type: application/json" \
  -H "x-api-key: sk-your-openai-api-key" \
  -d '{
    "topic": "React 基礎教學",
    "model": "gpt-3.5-turbo",
    "language": "zh-TW",
    "targetAudience": "beginner"
  }'
```

#### 測試匯出 API

```bash
curl -X POST http://localhost:3000/api/v1/export \
  -H "Content-Type: application/json" \
  -d '{
    "markdown": "# 測試投影片\n\n這是測試內容。\n\n---\n\n# 第二張投影片\n\n更多內容。",
    "format": "html",
    "filename": "test-slides",
    "theme": "default"
  }' \
  --output test-slides.html
```

### 2. API 錯誤測試

#### 測試無效請求

```bash
# 缺少必要欄位
curl -X POST http://localhost:3000/api/v1/slides \
  -H "Content-Type: application/json" \
  -d '{}'
```

#### 測試無效 API 金鑰

```bash
curl -X POST http://localhost:3000/api/v1/slides \
  -H "Content-Type: application/json" \
  -H "x-api-key: invalid-key" \
  -d '{
    "topic": "測試主題"
  }'
```

---

## 🐛 故障排除

### 常見問題

#### 1. 應用無法啟動

**症狀**：`npm run dev` 失敗
**解決方案**：

```bash
# 清除依賴並重新安裝
rm -rf node_modules package-lock.json
npm install

# 檢查 Node.js 版本
node --version  # 應該 >= 18.0.0

# 檢查連接埠是否被佔用
lsof -i :3000
```

#### 2. OpenAI API 錯誤

**症狀**：投影片生成失敗
**檢查清單**：

- ✅ API 金鑰格式正確（以 `sk-` 開頭）
- ✅ API 金鑰有效且未過期
- ✅ OpenAI 帳戶有足夠額度
- ✅ 網路連接正常
- ✅ 防火牆未阻擋 OpenAI API

**診斷命令**：

```bash
# 測試 API 金鑰
curl https://api.openai.com/v1/models \
  -H "Authorization: Bearer your-api-key-here"
```

#### 3. 預覽不更新

**症狀**：編輯器更改後預覽不更新
**解決方案**：

- 重新載入頁面（F5）
- 檢查瀏覽器控制台錯誤
- 清除瀏覽器快取
- 檢查是否有 JavaScript 錯誤

#### 4. 匯出功能異常

**症狀**：匯出檔案失敗或檔案損壞
**檢查項目**：

- ✅ Markdown 內容有效
- ✅ 檔案名稱不包含特殊字元
- ✅ 瀏覽器允許下載
- ✅ 磁碟空間充足

#### 5. 樣式顯示異常

**症狀**：介面佈局混亂或樣式錯誤
**解決方案**：

```bash
# 重新建置應用
npm run build

# 檢查 CSS 是否正確載入
# 在瀏覽器開發工具的 Network 標籤中檢查
```

#### 6. 記憶體使用過高

**症狀**：應用變慢或瀏覽器崩潰
**解決方案**：

- 減少編輯器內容量
- 關閉不必要的瀏覽器標籤
- 重新啟動瀏覽器
- 檢查是否有記憶體洩漏

### 日誌檢查

#### 瀏覽器控制台

1. 按 F12 打開開發工具
2. 切換到 Console 標籤
3. 檢查錯誤訊息（紅色）
4. 檢查警告訊息（黃色）

#### 伺服器日誌

```bash
# 開發模式日誌
npm run dev

# 檢查 API 請求日誌
# 日誌會顯示在終端中
```

#### 網路請求檢查

1. 打開開發工具 → Network 標籤
2. 重新載入頁面
3. 檢查失敗的請求（紅色）
4. 檢查 API 回應內容

---

## 👨‍💻 開發模式

### 開發工具

#### 熱重載

- 檔案修改後自動重新載入
- CSS 變更即時反映
- 狀態保持（部分情況下）

#### 除錯模式

設置環境變數：

```env
NEXT_PUBLIC_DEBUG=true
```

啟用後會顯示：

- 詳細的錯誤訊息
- 效能分析資訊
- API 請求細節
- 狀態變化日誌

#### 快取控制

開發時可能需要清除快取：

```javascript
// 在瀏覽器控制台執行
localStorage.clear();
sessionStorage.clear();
```

### 測試建議

#### 定期測試項目

1. **每日**：基本功能測試
2. **每週**：完整功能測試
3. **發佈前**：所有功能和邊界測試

#### 測試環境

- **開發環境**：本地開發測試
- **模擬環境**：生產模式測試
- **多瀏覽器**：Chrome, Firefox, Safari, Edge

#### 自動化測試

```bash
# 運行測試套件（如果有設置）
npm test

# 建置測試
npm run build

# 類型檢查
npm run type-check
```

---

## 📝 測試檢查清單

### 啟動檢查清單

- [ ] Node.js 版本正確
- [ ] 依賴安裝完成
- [ ] 環境變數設置
- [ ] 應用正常啟動
- [ ] 無控制台錯誤

### 功能測試檢查清單

#### 編輯器

- [ ] Markdown 語法高亮
- [ ] 行號顯示
- [ ] 工具列按鈕
- [ ] 快捷鍵功能
- [ ] 統計資訊顯示

#### 預覽

- [ ] 即時預覽更新
- [ ] 主題切換
- [ ] 導航控制
- [ ] 縮放功能
- [ ] 全螢幕模式

#### AI 生成

- [ ] API 金鑰驗證
- [ ] 投影片生成
- [ ] 錯誤處理
- [ ] 進度顯示
- [ ] 結果顯示

#### 匯出

- [ ] HTML 匯出
- [ ] PDF 匯出（模擬）
- [ ] PPTX 匯出（模擬）
- [ ] Markdown 匯出
- [ ] 檔案下載

#### 其他

- [ ] 主題切換
- [ ] 響應式設計
- [ ] 錯誤邊界
- [ ] 效能正常

---

## 🆘 支援

如果遇到問題：

1. **檢查本文件**的故障排除部分
2. **查看控制台錯誤**訊息
3. **檢查 API 金鑰**是否有效
4. **重新啟動應用**
5. **清除瀏覽器快取**

### 有用的命令

```bash
# 重新安裝依賴
npm ci

# 清除 Next.js 快取
rm -rf .next

# 檢查依賴版本
npm list

# 更新依賴
npm update

# 檢查安全性問題
npm audit
```

---

**祝您使用愉快！** 🎉
